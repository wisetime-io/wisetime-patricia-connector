-- A schema dump of selected tables from Patricia v5.6.3, taken on 12nd December 2018

CREATE TABLE VW_CASE_NUMBER (
	CASE_ID int NOT NULL,
	CASE_NUMBER nvarchar(40) NOT NULL
);

CREATE TABLE PAT_CASE (
	CASE_ID int NOT NULL,
	CASE_CATCH_WORD nvarchar(120) NULL,
	STATE_ID nvarchar(2) NOT NULL,
	APPLICATION_TYPE_ID int NOT NULL,
	CASE_TYPE_ID int NOT NULL
);

CREATE TABLE PERSON (
	LOGIN_ID nvarchar(20) NOT NULL,
	EMAIL nvarchar(100) NULL,
	HOURLY_RATE real NULL,
);

CREATE TABLE CASTING (
	ROLE_TYPE_ID int NOT NULL,
	ACTOR_ID int NOT NULL,
	CASE_ID int NOT NULL,
	CASE_ROLE_SEQUENCE int
);

CREATE TABLE PAT_NAMES (
	NAME_ID int NOT NULL,
	CURRENCY_ID nvarchar(3) NULL
);

CREATE TABLE PAT_PERSON_HOURLY_RATE (
	PAT_PERSON_HOURLY_RATE_ID int NOT NULL,
	LOGIN_ID nvarchar(20) NOT NULL,
	WORK_CODE_ID nvarchar(10) NULL,
	HOURLY_RATE decimal(10, 2) NULL,
);

CREATE TABLE PAT_WORK_CODE_DISCOUNT_HEADER (
	DISCOUNT_ID int NOT NULL,
	ACTOR_ID int NOT NULL,
	CASE_TYPE_ID int NULL,
	STATE_ID nvarchar(2) NULL,
	APPLICATION_TYPE_ID int NULL,
	WORK_CODE_TYPE nvarchar(1) NULL,
	WORK_CODE_ID nvarchar(20) NULL,
	DISCOUNT_TYPE int NOT NULL
);

CREATE TABLE PAT_WORK_CODE_DISCOUNT_DETAIL (
	DISCOUNT_ID int NOT NULL,
	AMOUNT decimal(14, 2) NOT NULL,
	DISCOUNT_PCT decimal(10, 6) NULL,
	price_change_formula nvarchar(255) NOT NULL
);

CREATE TABLE BUDGET_HEADER (
	CASE_ID int NOT NULL,
	BUDGET_EDIT_DATE datetime NULL
);

CREATE TABLE TIME_REGISTRATION (
	B_L_SEQ_NUMBER int NOT NULL,
	WORK_CODE_ID nvarchar(10) NOT NULL,
	CASE_ID int NOT NULL,
	REGISTRATION_DATE_TIME datetime NOT NULL,
	LOGIN_ID nvarchar(20) NOT NULL,
	CALENDAR_DATE datetime NULL,
	WORKED_TIME numeric(8, 2) NULL,
	DEBITED_TIME numeric(8, 2) NULL,
	TIME_TRANSFERRED nvarchar(1) NULL,
	NUMBER_OF_WORDS int NULL,
	WORKED_AMOUNT numeric(10, 2) NULL,
	B_L_CASE_ID int NULL,
	TIME_COMMENT_INVOICE ntext NULL,
	TIME_COMMENT ntext NULL,
	TIME_REG_BOOKED_DATE datetime NULL,
	EARLIEST_INVOICE_DATE datetime NULL
);

CREATE TABLE BUDGET_LINE (
	B_L_SEQ_NUMBER int NOT NULL,
	WORK_CODE_ID nvarchar(10) NOT NULL,
	B_L_QUANTITY numeric(8, 2) NULL,
	B_L_ORG_QUANTITY numeric(8, 2) NULL,
	B_L_UNIT_PRICE numeric(14, 2) NULL,
	B_L_ORG_UNIT_PRICE numeric(14, 2) NULL,
	B_L_UNIT_PRICE_NO_DISCOUNT numeric(14, 2) NULL,
	DEB_HANDLAGG nvarchar(20) NULL,
	B_L_AMOUNT numeric(14, 2) NULL,
	B_L_ORG_AMOUNT numeric(14, 2) NULL,
	CASE_ID int NOT NULL,
	SHOW_TIME_COMMENT int NULL,
	REGISTERED_BY nvarchar(20) NULL,
	EARLIEST_INV_DATE datetime NULL,
	B_L_COMMENT ntext NULL,
	RECORDED_DATE datetime NULL,
	DISCOUNT_PREC numeric(10, 6) NULL,
	DISCOUNT_AMOUNT numeric(14, 2) NULL,
	CURRENCY_ID nvarchar(3) NULL,
	EXCHANGE_RATE numeric(10, 6) NULL,
	INDICATOR nvarchar(3) NULL,
	EXTERNAL_INVOICE_DATE datetime null,
	-- added on October 18th 2019
	CHARGEING_TYPE_ID int null
);

-- Added on April 16th 2019
create table WORK_CODE
(
	WORK_CODE_ID nvarchar(10) not null
		constraint PK_WORK_CODE
			primary key,
	WORK_CODE_DEFAULT_AMOUNT numeric(10,2),
	REPLACE_AMOUNT int
);
